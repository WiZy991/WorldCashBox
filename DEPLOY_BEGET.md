# Инструкция по деплою на Beget

## Быстрый старт

### Windows:
```bash
deploy-beget.bat
```

### Linux/Mac:
```bash
chmod +x deploy-beget.sh
./deploy-beget.sh
```

## Подготовка проекта вручную

1. **Установите зависимости** (если еще не установлены):
```bash
npm install
```

2. **Соберите проект для production**:
```bash
npm run build
```

После сборки будут созданы папки:
- `.next/standalone/` - оптимизированная версия приложения
- `.next/static/` - статические файлы

## Настройка на Beget

### Вариант 1: Standalone режим (рекомендуется)

Next.js соберет оптимизированную версию в папке `.next/standalone`.

### Вариант 2: Статический экспорт

Если Beget не поддерживает Node.js или вы хотите статический сайт, можно использовать статический экспорт.

## Загрузка на сервер

### Через FTP/SFTP:

1. **Подключитесь к вашему хостингу Beget через FTP/SFTP**
   - Хост: обычно `ftp.beget.com` или ваш домен
   - Логин и пароль: из панели управления Beget

2. **Загрузите следующие файлы и папки:**
   - `.next/` (вся папка)
   - `public/` (вся папка)
   - `package.json`
   - `package-lock.json`
   - `node_modules/` (или установите на сервере через `npm install --production`)

3. **Для standalone режима загрузите:**
   - `.next/standalone/` (вся папка)
   - `.next/static/` (вся папка)
   - `public/` (вся папка)

### Через SSH (если доступен):

1. **Подключитесь по SSH к серверу Beget**

2. **Перейдите в директорию вашего сайта** (обычно `~/имя_сайта/` или `~/public_html/`)

3. **Загрузите файлы** (можно использовать `scp` или `rsync`):
```bash
# С вашего компьютера
scp -r .next public package.json package-lock.json user@beget.com:~/public_html/
```

4. **На сервере установите зависимости:**
```bash
cd ~/public_html
npm install --production
```

5. **Запустите приложение:**
```bash
npm start
```

## Настройка Node.js на Beget

1. **В панели управления Beget:**
   - Перейдите в раздел "Node.js"
   - Выберите версию Node.js (рекомендуется 18.x или выше)
   - Укажите точку входа: `server.js` или `node_modules/.bin/next start`
   - Укажите порт (обычно автоматически)

2. **Файл `server.js` уже создан в проекте** - используйте его как точку входа, если Beget требует явного указания.

   Или используйте стандартную команду Next.js:
   - Точка входа: `node_modules/.bin/next start`
   - Или: `npm start`

## Настройка домена

1. В панели управления Beget привяжите домен к Node.js приложению
2. Убедитесь, что домен указывает на правильную директорию

## Проверка

После загрузки откройте ваш сайт в браузере и проверьте:
- Главная страница загружается
- Все маршруты работают
- API routes функционируют
- Статические файлы (изображения, CSS) загружаются

## Возможные проблемы

1. **Ошибка "Module not found"**: Убедитесь, что `node_modules` загружены или установлены на сервере
2. **Порт занят**: Проверьте настройки Node.js в панели Beget
3. **Медленная загрузка**: Используйте standalone режим для оптимизации

## Полезные команды

- `npm run build` - сборка проекта
- `npm start` - запуск production сервера
- `npm run dev` - запуск dev сервера (только для разработки)

